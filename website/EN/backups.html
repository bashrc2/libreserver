<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="libreserver.css" />
    <link rel="manifest" href="manifest.json" />
    <title>libreserver</title>
  </head>
  <body>
    <br />
    <a href="index.html"><h1><span class="titlePrefix">Libre</span>Server</h1></a>
    <div class="subtitle">Backups</div>
    <div class="networkImage">
      <img src="images/internet.png" />
    </div>
    <div class="projectDescription">

      <h2>Automatic backups</h2>
      <ul>
	<li>Insert a USB drive</li>
	<li>That's it</li>
      </ul>

      <p>
	Backups will happen automatically once per day. If you have the XMPP app installed then you will get a message saying whether the backup succeeded or not.
      </p>

      <h2>Backup to USB drive</h2>
      <p>
	Insert a USB thumb drive into the front socket of the Beaglebone Black, or equivalent USB socket.
      </p>

      <p>
	Log into the system and become the root user, then run the <i>backup</i> command.
      </p>

      <pre>ssh username@domainname -p 2222</pre>

      <p>
	Select <i>Administrator controls</i> then <i>Backup and Restore</i> and then <i>Backup data to USB drive</i>.
      </p>

      <p>
	Type in a password which will be used to encrypt the backup, then the backup will begin.
      </p>

      <p>
	When the backup ends remove the USB drive and keep it somewhere safe. Even if it gets lost or falls into the wrong hands the content is encrypted and so is unlikely to become a source of leaks.
      </p>

      <h2>Restore from USB drive</h2>
      <p>
	Log into the system and become the root user:
      </p>

      <pre>ssh username@domainname -p 2222</pre>

      <p>
	Select <i>Administrator controls</i> then if this is a new LibreServer installation then you will first need to restore your backup keys. That can be done by selecting <i>Backup and Restore</i> then <i>Restore GPG key from USB keydrive</i>. When that's done remove the keydrive and plug in the backup drive.
      </p>

      <p>
	Select <i>Backup and Restore</i> then <i>Restore data from USB drive</i>.
      </p>

      <p>
	Enter the LUKS password for the USB drive. When the restore is complete you can remove the USB drive.
      </p>
    </div>
  </body>
</html>
