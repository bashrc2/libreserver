<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="libreserver.css" />
    <link rel="manifest" href="manifest.json" />
    <title>libreserver</title>
  </head>
  <body>
    <br />
    <a href="apps.html"><h1><span class="titlePrefix">Libre</span>Server</h1></a>
    <div class="subtitle">IRC</div>
    <div class="networkImage">
      <img src="images/internet.png" />
    </div>

    <div class="projectDescription">

      <p>
	IRC is useful for multi-user chat. The classic use case is for software development where many engineers might need to coordinate their activities, but it's also useful for meetings, parties and general socialising.
      </p>

      <h2>Irssi</h2>
      <p>
	The easiest way to use irssi is to connect to your system, like this:
      </p>

      <pre>ssh myusername@mydomain -p 2222</pre>

      <p>
	Then select <b>IRC</b> from the menu. However, other than via this method using ssh, irssi isn't a very good IRC client because it doesn't have the capability to onion route messages, and therefore leaks metadata. For the best security when using your IRC server, use HexChat, Emacs ERC or another client which supports socks5 proxying.
      </p>

      <h2>HexChat</h2>
      <p>
	HexChat (formerly XChat) is compatible with proxying via Tor and so provides the best security when connecting to your IRC server. It will allow you to connect to your IRC server's onion address.
      </p>

      <p>
	First install HexChat and set up its configuration file. This can be done on your local machine with:
      </p>

      <pre>libreserver-client --setup hexchat</pre>

      <p>
	Now look up the onion address for your IRC server
      </p>

      <pre>ssh username@mydomainname -p 2222</pre>

      <p>
	Select Administrator options, then <b>About this system</b> and make a note of the onion address for IRC. Also select the <b>IRC Menu</b> and take a note of the login password.
      </p>

      <p>
	Run HexChat.
      </p>

      <p>
	Within the network list click, <b>Add</b> and enter your domain name then click <b>Edit</b>.
      </p>

      <p>
	Select the entry within the servers box, then enter <b>ircaddress.onion/6697</b> or <b>mydomainname/6697</b> and press <b>Enter</b>.
      </p>

      <p>
	Uncheck <b>use global user information</b>.
      </p>

      <p>
	Enter first and second nicknames and check <b>connect to this network on startup</b>.
      </p>

      <p>
	If you are using the ordinary domain name (clearnet/ICANN) then make sure that <b>Use SSL</b> is checked.
      </p>


      <p>
	<img src="images/hexchat_setup_clearnet.jpg" alt="hexchat_setup_clearnet.jpg" width="80%" align="center" />
      </p>

      <p>
	If you are using the onion address then <b>use SSL</b> should be unchecked and the transport encryption will be handled via the onion address itself.
      </p>


      <p>
	<img src="images/hexchat_setup.jpg" alt="hexchat_setup.jpg" width="80%" align="center" />
      </p>

      <p>
	Within the <b>Password</b> field enter the password which can be found from the IRC menu of the <b>control panel</b>.
      </p>

      <p>
	Select the <b>Autojoin channels</b> tab, click <b>Add</b> and enter <b>#libreserver</b> as the channel name.
      </p>

      <p>
	Click <b>close</b> and then <b>connect</b>.
      </p>

      <h2>Emacs</h2>
      <p>
	If you are an Emacs user then you can also connect to your IRC server via Emacs.
      </p>

      <p>
	Ensure that tor is installed onto your local system:
      </p>

      <pre>sudo apt-get install tor</pre>

      <p>
	Add the following to your Emacs configuration file:
      </p>

      <pre>
	(setq socks-noproxy '("localhost"))
	(require 'socks)
	(require 'tls)
	(setq socks-server (list "Tor socks" "localhost" 9050 5))
	(setq erc-server-connect-function 'socks-open-network-stream)
	(setq erc-autojoin-channels-alist
	'(("myircaddress.onion" "#libreserver")))
	(erc :server "myircaddress.onion" :port 6697 :nick "yourusername" :password "your IRC password")
      </pre>

      <h2>Changing or removing the IRC password</h2>
      <p>
	By default the IRC server is set up to require a password for users to log in. The password is the same for all users. If you want to change or remove the password:
      </p>

      <pre>ssh myusername@mydomain -p 2222</pre>

      <p>
	Select <i>Administrator controls</i> then <b>IRC Menu</b> and then change the password. An empty password will allow anyone to log in, so you can have a globally accessible IRC system if you wish, although you might want to carefully consider whether that's wise.
      </p>
    </div>
  </body>
</html>
